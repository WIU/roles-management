/*
 ### jQuery Google Maps Plugin v1.01 ###
 * Home: http://www.mayzes.org/googlemaps.jquery.html
 * Code: http://www.mayzes.org/js/jquery.googlemaps1.01.js
 * Date: 2010-01-14 (Thursday, 14 Jan 2010)
 * 
 * Dual licensed under the MIT and GPL licenses.
 *   http://www.gnu.org/licenses/gpl.html
 *   http://www.opensource.org/licenses/mit-license.php
 ###
*/
jQuery.fn.googleMaps=function(a){if(!window.GBrowserIsCompatible||!GBrowserIsCompatible())return this;var b=$.extend({},$.googleMaps.defaults,a);return this.each(function(){$.googleMaps.gMap=new GMap2(this,b),$.googleMaps.mapsConfiguration(b)})},$.googleMaps={mapsConfiguration:function(a){if(a.geocode)geocoder=new GClientGeocoder,geocoder.getLatLng(a.geocode,function(b){b?($.googleMaps.gMap.setCenter(b,a.depth),$.googleMaps.latitude=b.x,$.googleMaps.longitude=b.y):alert(address+" not found")});else{var b=$.googleMaps.mapLatLong(a.latitude,a.longitude);$.googleMaps.gMap.setCenter(b,a.depth)}a.polyline&&$.googleMaps.gMap.addOverlay($.googleMaps.mapPolyLine(a.polyline)),a.geodesic&&$.googleMaps.mapGeoDesic(a.geodesic),a.pan&&(a.pan=$.googleMaps.mapPanOptions(a.pan),window.setTimeout(function(){$.googleMaps.gMap.panTo($.googleMaps.mapLatLong(a.pan.panLatitude,a.pan.panLongitude))},a.pan.timeout)),a.layer&&$.googleMaps.gMap.addOverlay(new GLayer(a.layer)),a.markers&&$.googleMaps.mapMarkers(b,a.markers),a.controls.type||a.controls.zoom||a.controls.mapType?$.googleMaps.mapControls(a.controls):a.controls.hide||$.googleMaps.gMap.setUIToDefault(),a.scroll?$.googleMaps.gMap.enableScrollWheelZoom():a.scroll||$.googleMaps.gMap.disableScrollWheelZoom(),a.controls.localSearch?$.googleMaps.gMap.enableGoogleBar():$.googleMaps.gMap.disableGoogleBar(),a.feed&&$.googleMaps.gMap.addOverlay(new GGeoXml(a.feed));if(a.trafficInfo){var c={incidents:!0};trafficInfo=new GTrafficOverlay(c),$.googleMaps.gMap.addOverlay(trafficInfo)}a.directions&&($.googleMaps.directions=new GDirections($.googleMaps.gMap,a.directions.panel),$.googleMaps.directions.load(a.directions.route)),a.streetViewOverlay&&(svOverlay=new GStreetviewOverlay,$.googleMaps.gMap.addOverlay(svOverlay))},mapGeoDesic:function(a){geoDesicDefaults={startLatitude:37.4419,startLongitude:-122.1419,endLatitude:37.4519,endLongitude:-122.1519,color:"#ff0000",pixels:2,opacity:10},a=$.extend({},geoDesicDefaults,a);var b={geodesic:!0},c=new GPolyline([new GLatLng(a.startLatitude,a.startLongitude),new GLatLng(a.endLatitude,a.endLongitude)],a.color,a.pixels,a.opacity,b);$.googleMaps.gMap.addOverlay(c)},localSearchControl:function(a){var b=$.googleMaps.mapControlsLocation(a.location);$.googleMaps.gMap.addControl(new $.googleMaps.gMap.LocalSearch,new GControlPosition(b,new GSize(a.x,a.y)))},getLatitude:function(){return $.googleMaps.latitude},getLongitude:function(){return $.googleMaps.longitude},directions:{},latitude:"",longitude:"",latlong:{},maps:{},marker:{},gMap:{},defaults:{latitude:37.4419,longitude:-122.1419,depth:13,scroll:!0,trafficInfo:!1,streetViewOverlay:!1,controls:{hide:!1,localSearch:!1},layer:null},mapPolyLine:function(a){return polylineDefaults={startLatitude:37.4419,startLongitude:-122.1419,endLatitude:37.4519,endLongitude:-122.1519,color:"#ff0000",pixels:2},a=$.extend({},polylineDefaults,a),new GPolyline([$.googleMaps.mapLatLong(a.startLatitude,a.startLongitude),$.googleMaps.mapLatLong(a.endLatitude,a.endLongitude)],a.color,a.pixels)},mapLatLong:function(a,b){return new GLatLng(a,b)},mapPanOptions:function(a){var b={panLatitude:37.4569,panLongitude:-122.1569,timeout:0};return a=$.extend({},b,a)},mapMarkersOptions:function(a){var b=new GIcon(G_DEFAULT_ICON);return a.image&&(b.image=a.image),a.shadow&&(b.shadow=a.shadow),a.iconSize&&(b.iconSize=new GSize(a.iconSize)),a.shadowSize&&(b.shadowSize=new GSize(a.shadowSize)),a.iconAnchor&&(b.iconAnchor=new GPoint(a.iconAnchor)),a.infoWindowAnchor&&(b.infoWindowAnchor=new GPoint(a.infoWindowAnchor)),a.dragCrossImage&&(b.dragCrossImage=a.dragCrossImage),a.dragCrossSize&&(b.dragCrossSize=new GSize(a.dragCrossSize)),a.dragCrossAnchor&&(b.dragCrossAnchor=new GPoint(a.dragCrossAnchor)),a.maxHeight&&(b.maxHeight=a.maxHeight),a.PrintImage&&(b.PrintImage=a.PrintImage),a.mozPrintImage&&(b.mozPrintImage=a.mozPrintImage),a.PrintShadow&&(b.PrintShadow=a.PrintShadow),a.transparent&&(b.transparent=a.transparent),b},mapMarkers:function(a,b){typeof b.length=="undefined"&&(b=[b]);var c=0;for(i=0;i<b.length;i++){var d=null;b[i].icon&&(d=$.googleMaps.mapMarkersOptions(b[i].icon));if(b[i].geocode){var e=new GClientGeocoder;e.getLatLng(b[i].geocode,function(a){a?$.googleMaps.marker[i]=new GMarker(a,{draggable:b[i].draggable,icon:d}):alert(address+" not found")})}else b[i].latitude&&b[i].longitude&&(a=$.googleMaps.mapLatLong(b[i].latitude,b[i].longitude),$.googleMaps.marker[i]=new GMarker(a,{draggable:b[i].draggable,icon:d}));$.googleMaps.gMap.addOverlay($.googleMaps.marker[i]),b[i].info&&($(b[i].info.layer).hide(),b[i].info.popup?$.googleMaps.marker[i].openInfoWindowHtml($(b[i].info.layer).html()):$.googleMaps.marker[i].bindInfoWindowHtml($(b[i].info.layer).html().toString()))}},mapControlsLocation:function(a){switch(a){case"G_ANCHOR_TOP_RIGHT":return G_ANCHOR_TOP_RIGHT;case"G_ANCHOR_BOTTOM_RIGHT":return G_ANCHOR_BOTTOM_RIGHT;case"G_ANCHOR_TOP_LEFT":return G_ANCHOR_TOP_LEFT;case"G_ANCHOR_BOTTOM_LEFT":return G_ANCHOR_BOTTOM_LEFT}return},mapControl:function(a){switch(a){case"GLargeMapControl3D":return new GLargeMapControl3D;case"GLargeMapControl":return new GLargeMapControl;case"GSmallMapControl":return new GSmallMapControl;case"GSmallZoomControl3D":return new GSmallZoomControl3D;case"GSmallZoomControl":return new GSmallZoomControl;case"GScaleControl":return new GScaleControl;case"GMapTypeControl":return new GMapTypeControl;case"GHierarchicalMapTypeControl":return new GHierarchicalMapTypeControl;case"GOverviewMapControl":return new GOverviewMapControl;case"GNavLabelControl":return new GNavLabelControl}return},mapTypeControl:function(a){switch(a){case"G_NORMAL_MAP":return G_NORMAL_MAP;case"G_SATELLITE_MAP":return G_SATELLITE_MAP;case"G_HYBRID_MAP":return G_HYBRID_MAP}return},mapControls:function(a){controlsDefaults={type:{location:"G_ANCHOR_TOP_RIGHT",x:10,y:10,control:"GMapTypeControl"},zoom:{location:"G_ANCHOR_TOP_LEFT",x:10,y:10,control:"GLargeMapControl3D"}},a=$.extend({},controlsDefaults,a),a.type=$.extend({},controlsDefaults.type,a.type),a.zoom=$.extend({},controlsDefaults.zoom,a.zoom);if(a.type){var b=$.googleMaps.mapControlsLocation(a.type.location),c=new GControlPosition(b,new GSize(a.type.x,a.type.y));$.googleMaps.gMap.addControl($.googleMaps.mapControl(a.type.control),c)}if(a.zoom){var b=$.googleMaps.mapControlsLocation(a.zoom.location),c=new GControlPosition(b,new GSize(a.zoom.x,a.zoom.y));$.googleMaps.gMap.addControl($.googleMaps.mapControl(a.zoom.control),c)}if(a.mapType)if(a.mapType.length>=1)for(i=0;i<a.mapType.length;i++)a.mapType[i].remove&&$.googleMaps.gMap.removeMapType($.googleMaps.mapTypeControl(a.mapType[i].remove)),a.mapType[i].add&&$.googleMaps.gMap.addMapType($.googleMaps.mapTypeControl(a.mapType[i].add));else a.mapType.add&&$.googleMaps.gMap.addMapType($.googleMaps.mapTypeControl(a.mapType.add)),a.mapType.remove&&$.googleMaps.gMap.removeMapType($.googleMaps.mapTypeControl(a.mapType.remove))},geoCode:function(a){geocoder=new GClientGeocoder,geocoder.getLatLng(a.address,function(b){b?$.googleMaps.gMap.setCenter(b,a.depth):alert(address+" not found")})}}