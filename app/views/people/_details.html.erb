<div id="entity_details">
  <div class="block withsidebar popup_block">
  	<div class="block_head">
  		<div class="bheadl"></div>
  		<div class="bheadr"></div>
			
      <button class="right" style="margin-top: 14px;" id="edit">Edit</button>
      
  		<h2><%= @person.first %> <%= @person.last %></h2>
  	</div>		<!-- .block_head ends -->
  	<div class="block_content">
      <div id="person_view">
    		<div class="sidebar">
    			<ul class="sidemenu">
    				<li><a href="#summary">Summary</a></li>
    				<li><a href="#roles">Roles</a></li>
    				<li><a href="#applications">Applications</a></li>
    				<li><a href="#subordinates">Subordinates</a></li>
            <li><a href="#memberships">Memberships</a></li>
    			</ul>
				  
    			<p><strong><a href="mailto:<%= @person.email %>">E-Mail This Person</a></strong><br />
          <strong><a href="#">View Their Tickets</a></strong><br />
          <strong><a href="#">Call Them via Lync</a></strong></p>
    		</div>		<!-- .sidebar ends -->
        
    		<div class="sidebar_content" id="summary">
          <%= form_for(@person) do |f| %>
        	<p>
            <%= f.label :first, "Name" %><br />
            <%= f.text_field :first, :class => "text small" %> <%= f.text_field :last, :class => "text small" %>
        	</p>
        	<p>
            <%= f.label :preferred_name, "Preferred Name" %><br />
            <%= f.text_field :preferred_name, :class => "text" %>
        	</p>
        	<p>
            <%= f.label :email %> <%= f.label :loginid, "Login ID", :style => "padding-left: 127px;" %><br />
            <%= f.text_field :email, :class => "text small" %> <%= f.text_field :loginid, :class => "text small" %>
        	</p>
        	<p>
            <%= f.label :phone %><br />
            <%= f.text_field :phone, :class => "text" %>
        	</p>
        	<p>
            <%= f.label :address %><br />
            <%= f.text_field :address, :class => "text" %>
        	</p>
          <% end %>
        </div>
    		<div class="sidebar_content" id="roles">
          <p>
            An audit of this person's roles are displayed below.
          </p>
          <p>
            <b>To add roles, or remove roles</b> which you have given this person, use the main interface.
          </p>
          <ul>
            <% @person.roles.each do |role| %>
              <li><%= role.descriptor %> (<%= role.token %>) for <%= link_to role.application.name, role.application %></li>
            <% end %>
          </ul>
        </div>
    		<div class="sidebar_content" id="applications">
          applications edit mode
        </div>
    		<div class="sidebar_content" id="subordinates">
          <%= form_for(@person) do |f| %>
          <p>
            	<%= f.label :subordinates, "Subordinates <small>(Only subordinates not via group ownership)</small>".html_safe %><br />
            	<%= f.text_field :subordinate_tokens, "data-pre" => @person.subordinates.to_json, "method" => url_for(:controller => "api/people", :action => "index") %>
          </p>
          <% end %>
        </div>
    		<div class="sidebar_content" id="memberships">
          <%= form_for(@person) do |f| %>
          <b>Groups:</b><br />
          <p>
            	<%= f.text_field :group_tokens, "data-pre" => @person.groups.to_json, "method" => url_for(:controller => "api/groups", :action => "index") %>
          </p>

          <b>Organizational Units:</b><br />
          <p>
            	<%= f.text_field :ou_tokens, "data-pre" => @person.ous.to_json, "method" => url_for(:controller => "api/ous", :action => "index") %>
          </p>
          <% end %>
        </div>
      </div> <!-- #person_edit_view -->
      
    </div> <!-- .block_content ends -->
  </div> <!-- .block ends -->
</div> <!-- .entity_details -->

<script type="text/javascript" src="<%= asset_path "details_modal.js" %>"></script>
