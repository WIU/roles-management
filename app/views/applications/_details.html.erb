<div id="application_details">
  <div class="block withsidebar popup_block">
  	<div class="block_head">
  		<div class="bheadl"></div>
  		<div class="bheadr"></div>
		  
      <button class="right" style="margin-top: 14px;" id="edit">Edit</button>
      
  		<h2><%= @application.name %></h2>
  	</div> <!-- .block_head -->
	
  	<div class="block_content">
  		<div class="sidebar">
  			<ul class="sidemenu">
  				<li><a href="#summary">Summary</a></li>
          <li><a href="#roles">Roles</a></li>
          <li><a href="#ad">Active Directory</a></li>
  			</ul>
  		</div>		<!-- .sidebar ends -->
		
  		<div class="sidebar_content" id="summary">
  		  <p style="float: right;">
  		    <% if @application.icon.exists? %><%= image_tag @application.icon.url %><% end %>
  		  </p>
  			<p>
  			  <b>Name:</b>
  			  <%= @application.name %>
  			</p>
  			<p>
  			  <b>Display Name:</b>
  			  <%= @application.display_name %>
  			</p>
  			<p>
  			  <b>Description:</b>
  			  <%= @application.description %>
  			</p>
  			<p>
  			  <b>Hostname:</b>
  			  <%= @application.hostname %>
  			</p>
  			<p>
  			  <b>API Key:</b>
  			  <%= @application.api_key %>
  			</p>
  			<p>
  			  <b>Organizational Scoping <small><i>(who has access)</i></small>:</b>
  			  <ul>
  			  <% @application.ous.each do |ou| %>
  			  	<li><%= link_to ou.name, ou %></li>
  			  <% end %>
  			  <% if @application.ous.count == 0 %>
  			    <li>Everybody</li>
  			  <% end %>
  			  </ul>
  			</p>
  		</div> <!-- summary -->
  		<div class="sidebar_content" id="roles">
        
  		</div> <!-- roles -->
  		<div class="sidebar_content" id="ad">
        <h3>Group Name</h3>
        <p>
          Not set
        </p>
  		</div> <!-- ad -->
  	</div> <!-- .block_content -->
	
  	<div class="bendl"></div>
  	<div class="bendr"></div>
  </div> <!-- .block -->
</div> <!-- #application_details -->

<script type="text/javascript">
// setup JS specific to person view
$("button#edit").click(function() {
  // Button is a toggle. Are we turning the editing controls on or off?
  if($(this).html() == "Edit") {
    // turning them on
    $(this).html("Done").css("color", "#db6c67");
  } else {
    // turning them off
    $(this).html("Edit").css("color", "#000");
  }
}).hover(
  // fix jQuery's CSS hover mistake. TODO: fix this using css / apprise patching instead?
  function() {
    $(this).css("color", "#db6c67");
  },
  function() {
    if($(this).html() == "Edit") {
      $(this).css("color", "#000");
    } else {
      $(this).css("color", "#1eaaeb");
    }
  }
);
</script>
